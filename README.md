# PaySafe

### Description
This application implements reversible Ethereum transactions. This type of transaction is useful to ensure that only the intended recipient can access the sent funds. Once a transaction is created, the sender can notify the receiver to visit the application to withdraw the sent Ether. If the sender mistakenly sends Ether to the incorrect address (or the incorrect amount is sent), the sender may cancel the transaction and recieve a refund. Once the recipient has claimed the funds, the transaction is no longer eligible to be cancelled.

![PaySafe Screenshot](https://github.com/suhailgme/PaySafe/blob/master/screenshots/PaySafe.PNG)
Built with [Rimble❤️](https://github.com/ConsenSys/rimble-ui)
### Usage
* Access the Dapp on Rinkeby at (https://dreamy-hypatia-20bc93.netlify.com/) 
* Or [build and run it locally](#notes-to-developers)

#### Create a New ETH Payment
* Enter an address you wish to send funds to
* Input the amount of Ether to send to the specified address
* Optionally include any comments you'd like the recipient to see
* Hit the send button and accept the transaction on your wallet (e.g. Metamask)

#### Cancel a Payment
* Cancel a pending payment by clicking the red "Cancel" button
* Payments can only be cancelled if they have not been claimed by the recipient
* Once a payment has been cancelled, it is marked as cancelled

#### Accept a payment
* A payment can be claimed if it is pending by clicking on the green "Claim" button
* Once a payment has been claimed, it is marked as complete

#### General
* Account balances, payment history, and payment status are updated on the fly as transactions are sent by the user

### Notes to Developers
#### Prerequisites
* Solidity v0.5.0
* Truffle v5.0.25
* Node v10
* npm v6
* Ganache CLI or GUI
* Metamask

#### Building and Running PaySafe Locally
##### Compiling and Instantiating the PaySafe contract
* Clone the project locally using `git clone` (alternatively, download and extract the zip file)
* Navigate to the PaySafe folder via commmand line(e.g. Powershell or Terminal)
* Install project dependencies by typing `npm install` in the PaySafe folder
* In a new command line window, run `ganache-cli` and copy the mnemonic for use in Metamask
  * alternatively, run a Ganache GUI instance (retain the mnemonic for use in Metamask)
* In the previous command line window enter the `truffle migrate --network develop` command
  * This will compile and migrate the required contracts to the development blockchain
* Tests can be run by typing `truffle test`
* The PaySafe contract is now compiled and ready to be interacted with
##### Building the front-end client (Optional)
* ##### Optionally skip building the client and navigate to https://dreamy-hypatia-20bc93.netlify.com/ using Metamask on localhost:8545 with Ganache running to interact with the locally deployed instance of PaySafe
* In a command line terminal, navigate the the client directory located within the PaySafe folder
* Run the command `npm install` to download the required dependencies
* Once installation has completed, run the command `npm run start`
  * The frontend will be compiled and a browser window will open
  * If the browser window does not open navigate to [http://localhost:3000/](http://localhost:3000/)
* If currently logged into a Metamask account, logout and click "Import using account seed phrase"
* Paste the mnemonic generated by Ganache into the window and enter a password.
* The interface will request access to your Metamask instance. Granting permission will allow you to interact with the local instance of the PaySafe Dapp.
